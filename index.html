<html>
    <head>
        <title>WebGL Framework</title>
        <style>
            body{margin:0;}
        </style>
        <script>
            window.onload = function(){
                var gl = new WGLW("#webglcanvas");
                gl.setSize(window.innerWidth,window.innerHeight);
                gl.clear();
                gl.setClearColor({r:1.0,g:0.0,b:0.0,a:0.3});
                gl.clear();
                
                var shader = new Shader('./shaders/vertexshader.glsl', './shaders/shadertemplate.glsl');

                shader.compileShaders(gl.ctx);
                shader.initProgramShader(gl.ctx);
                shader.initShaderValues(gl.ctx,gl.canvas);
                
                gl.initBuffers(shader.attributs.a_position.location);

                var anim = new Animation(gl.ctx,shader,gl.canvas);
                anim.initRenderingLoop();
                anim.render();

                function onInitFs(fs) {
                   fs.root.getFile('tutorielsenfolie.txt', {create: true}, writeFile, function(e){console.log(e);});
                }
                function writeFile(fileEntry) {
                   fileEntry.createWriter(function(fileWriter) {
                      // On commence à la fin du fichier.
                      fileWriter.seek(fileWriter.length);
                      // On crée un objet Blob pour écrire dans le fichier.
                      var data = new Blob(['Tutoriels en folie'], {type: 'text/plain'});
                      fileWriter.write(data);
                   }, function(e){console.log(e);});
                }

                window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
                window.requestFileSystem(window.TEMPORARY, 1024*1024, onInitFs, function(e){console.log(e);});
            };
        </script>
    </head>
    <body>
        <canvas id="webglcanvas"></canvas>
        <img id="mirror"/>
        <script src="wglw.js"></script>
        <script src="shaderutil.js"></script>
        <script src="shader.js"></script>
        <script src="animation.js"></script>
        <script src="dat.gui.min.js"></script>
    </body>
</html>